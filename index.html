<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¯¸ì˜ì´ì˜ ê²°í˜¼ì„ ì¶•í•˜í•©ë‹ˆë‹¤.</title>
  <meta name="description" content="ë”°ëœ»í•œ ë§ˆìŒì„ ì „í•˜ëŠ” ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œ" />
  <!-- Open Graph for link preview -->
  <meta property="og:title" content="ë¯¸ì˜ì˜ ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œì— ì´ˆëŒ€í•©ë‹ˆë‹¤" />
  <meta property="og:description" content="ì†Œì¤‘í•œ ì‘ì›ê³¼ í•¨ê»˜ í•´ì£¼ì„¸ìš”" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://raw.githubusercontent.com/jaunnnngs/mobileWedding/main/img/sample_1.png" />
  <meta property="og:url" content="https://jaunnnngs.github.io/mobileWedding/" />
  <!-- í°íŠ¸ ê´€ë ¨ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
  
  <style>
    :root{
      --bg:#fffaf8; --ink:#1f2937; --muted:#6b7280; --brand:#ff8585; --soft:#f8e7e2; --card:#ffffff;
      --radius:18px; --shadow:0 6px 18px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;}
    a{color:inherit}
    img{max-width:100%;display:block}
    .wrap{max-width:720px;margin:0 auto;padding:16px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    .hero{position:relative;border-radius:var(--radius);overflow:hidden}
    .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(.9)}
    .hero .overlay{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;text-align:center;padding:24px}
    .badge{padding:20% 10px;}
    h1{margin:10px 0 0;font-size:28px;}
    h2{margin:0;font-size:20px;color:var(--brand)}
    .muted{color:var(--muted)}
    .section{margin:18px auto}
    .grid{display:grid;gap:12px}
    .grid.two{grid-template-columns:repeat(2,1fr)}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer;box-shadow:var(--shadow)}
    .btn.ghost{background:#fff;color:var(--brand);border:1px solid var(--brand)}
    .btn.full{width:100%;justify-content:center}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .pill{background:var(--soft);padding:10px 12px;border-radius:12px}
    .kv{display:grid;grid-template-columns:110px 1fr;gap:8px;align-items:start}
    .kv strong{display:block;color:var(--muted);font-size:13px}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(0,0,0,.08),transparent);margin:14px 0}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
    .thumb{aspect-ratio:1/1;border-radius:10px;overflow:hidden;cursor:pointer}
    .foot{text-align:center;color:var(--muted);font-size:12px;padding:24px 8px}
    .countdown{display:flex;gap:8px;justify-content:center}
    .chip{background:#ff8585;border:1px solid #eee;border-radius:10px;padding:8px 10px;min-width:58px;text-align:center;}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:center;padding:16px}
    .modal.open{display:grid}
    .modal .box{background:#000;max-width:720px;width:100%;border-radius:12px;overflow:hidden}
    .modal img{width:100%;height:100%}

    /* Responsive */
    @media(min-width:720px){
      h1{font-size:36px}
      .hero img{height:100%}
    }

	/* ğŸŒ¸ Flower Petal Animation */
    .petal {
      position: fixed;
      top: -10%;
      width: 20px;
      height: 20px;
      background: radial-gradient(circle at 30% 30%, #ffc0cb 40%, transparent 60%);
      border-radius: 50%;
      opacity: 0.9;
      animation: fall linear infinite;
    }

	@keyframes fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0.3;
      }
    }

	/* ì¸íŠ¸ë¡œ í•„ê¸°ì²´ ì œëª© */
	.english {
      font-family: "Allura", cursive;
      font-weight: auto;
      font-style: normal;
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 35px;
      /* margin-top: 80px; */
      color: #ff8585;
    }

    /* ëŒ“ê¸€ ëª©ë¡ */
	#comment-list {
		display:flex;
		flex-direction:column;
		gap:10px;
		margin:12px 0;
		max-height: 350px;   /* ì¹´ë“œ ì•ˆì— ë³´ì¼ ìµœëŒ€ ë†’ì´ */
		overflow-y: auto;     /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ */
		padding-right: 6px;   /* ìŠ¤í¬ë¡¤ë°” ê³µê°„ */
	}

	/* ì¢‹ì•„ìš” ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì¡°ê¸ˆ ë‹¤ë“¬ê¸° */
	.like-btn {
	position: relative;
	background: none;
	border: none;
	cursor: pointer;
	font-size: 18px;
	color: #f37a9e;
	display: inline-flex;
	align-items: center;
	gap: 4px;
	}

	/* í•˜íŠ¸ ëˆŒë €ì„ ë•Œ í†µí†µ íŠ€ëŠ” íš¨ê³¼ */
	.like-btn.pulse {
	animation: heart-pop 0.35s ease-out;
	}

	@keyframes heart-pop {
	0%   { transform: scale(1); }
	40%  { transform: scale(1.3); }
	100% { transform: scale(1); }
	}

	/* ìœ„ë¡œ ë‚ ì•„ê°€ëŠ” ì‘ì€ í•˜íŠ¸ */
	.flying-heart {
	position: absolute;
	left: 50%;
	bottom: 0;
	transform: translateX(-50%);
	font-size: 14px;
	pointer-events: none;
	animation: heart-fly 0.8s ease-out forwards;
	}

	@keyframes heart-fly {
	0% {
		opacity: 1;
		transform: translate(-50%, 0) scale(1);
	}
	100% {
		opacity: 0;
		transform: translate(-50%, -30px) scale(1.3);
	}
	}

/* ì‚¬ì§„ íˆ¬í‘œ grid */
  #photo-vote-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 12px;
}

/* ì¸ìƒìƒ· íˆ¬í‘œìš© ì¹´ë“œ */
.vote-thumb {
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  cursor: pointer;
  display: flex;
  flex-direction: column;
}

.vote-thumb img {
  width: 100%;
  display: block;
}

.vote-thumb-body {
  padding: 8px 8px 10px;
  text-align: center;
  font-size: 0.9rem;
}

.vote-thumb-title {
  font-weight: 600;
  margin-bottom: 4px;
}

.vote-thumb button.photo-vote-btn {
  border: none;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.8rem;
  cursor: pointer;
  background: #ff8585;
  color: #fff;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.vote-thumb button.photo-vote-btn.voted {
  background: #ffe0eb;
  color: #ff8585;
}


/* ì¸ìƒìƒ· ì™•ê´€ ì”Œìš°ê¸° */
.vote-thumb {
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  position: relative; /* ğŸ‘ˆ ì™•ê´€ ìœ„ì¹˜ ê¸°ì¤€ */
}

.crown-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(255, 215, 0, 0.92);
  color: #7a4b00;
  font-size: 0.75rem;
  padding: 4px 8px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.crown-badge span {
  font-size: 0.9rem;
}

  </style>
</head>
<body>
  <header class="wrap section">
    <nav class="row">
      <div class=""></div>
      <div class="row" style="gap:8px">
        <a class="btn ghost" href="#comments">ëŒ“ê¸€ë‚¨ê¸°ê¸°</a>
        <button class="btn ghost" id="shareBtn">ê³µìœ </button>
      </div>
    </nav>
  </header>
  <!-- HERO Cover -->
  <section class="wrap section card">
	  <!-- ğŸ’’ ğŸ’•-->
	<h1 class="english"> Blessings on your marriage. </h1>
    <div class="hero">
      <!-- ì»¤ë²„ ì´ë¯¸ì§€ êµì²´: cover.jpg -->
      <img src="img/sample_1.png" alt="wedding cover" />
      <div class="overlay">
        <span class="badge"></span>
        <h1>ë¯¸ì˜ Â· (ì‹ ë‘)</h1>
        <p class="muted" style="margin:4px 0 12px">ì˜ˆì‹œ) 2026ë…„ 3ì›” 14ì¼ í† ìš”ì¼ ì˜¤í›„ 1ì‹œ</p>
        <div class="countdown" id="countdown"></div>
      </div>
    </div>
  </section>

  <!-- ì¸ì‚¬ë§ & ê¸°ë³¸ ì •ë³´ -->
  <!-- <section class="wrap section card">
    
    <div class="divider"></div>
    <div class="grid two">
      <button class="btn full" id="addCalendar">ìº˜ë¦°ë” ì €ì¥</button>
      <a class="btn full" href="#map">ì˜¤ì‹œëŠ” ê¸¸</a>
    </div>
  </section> -->

  <section class="wrap section card">
  <h2>ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œ ì•ˆë‚´ ğŸ€</h2>
  <p class="muted" style="margin-top:4px;">
    ì–´ì„œ ì™€ìš”! ë¯¸ì˜ì´ë¥¼<br/> ìœ„í•œ ì‘ì€ ë¸Œë¼ì´ëœ ìƒ¤ì›Œ ê³µê°„ì´ì—ìš” ğŸ’•  
  </p>

  <div style="
      background:#ffefef;
      padding:18px 16px;
      border-radius:14px;
      margin-top:12px;
      color:#7a4b58;
      line-height:1.56;
      box-shadow:0 3px 10px rgba(0,0,0,0.05);
    ">
    <p style="margin:0 0 10px 0;"><b>ì—¬ê¸°ì—ì„œ í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤:</b></p>

    <ul style="padding-left:18px; margin:0;">
      <li>ğŸ’ ë‘ ì‚¬ëŒ ì›¨ë”© ì‚¬ì§„ êµ¬ê²½</li>
      <li>ğŸ‘‘ â€˜ì¸ìƒìƒ· íˆ¬í‘œâ€™ë¡œ ë² ìŠ¤íŠ¸ ì‚¬ì§„ ë½‘ê¸°</li>
      <li>ğŸŒ¸ ëœë¤ â€˜ì§ˆë¬¸ ì¹´ë“œâ€™ë¥¼ ë½‘ì•„ ì¬ë¯¸ë‚œ ë‹µ ë‚¨ê¸°ê¸°</li>
      <li>ğŸ’Œ ì¶•í•˜ ëŒ“ê¸€ ë‚¨ê¸°ê¸°</li>
      <li>ğŸ’– ë§ˆìŒì— ë“œëŠ” ê¸€ê³¼ ì‚¬ì§„ì— í•˜íŠ¸ë¡œ ì‘ì› ë³´ë‚´ê¸°</li>
    </ul>

    <p style="margin:14px 0 0 0; font-size:0.9rem; color:#9c7080;">
      ì§§ì€ í•œë§ˆë””ë¼ë„ ì‹ ë¶€ì—ê²Œ í° í˜ì´ ë  ê±°ì˜ˆìš”.  
      ë”°ëœ»í•œ ë§ˆìŒì„ ë¶€íƒë“œë¦´ê²Œìš” âœ¨
    </p>
  </div>
</section>
  <!-- ê°¤ëŸ¬ë¦¬ -->
  <section class="wrap section card">
    <h2> í¬í†  ì½”ë„ˆ ğŸŒ¸</h2>
    <p class="muted" style="margin-top:4px;">
      ğŸ“¸ ì•„ë˜ì˜ ì›¨ë”© ì‚¬ì§„ë“¤ì€ ë¯¸ì˜ì´ì˜ í–‰ë³µí•œ ìˆœê°„ë“¤ì„ ë‹´ì•˜ì–´ìš”.<br>
        ëˆˆì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ì§„ì´ ìˆë‹¤ë©´ ì¸ìƒìƒ· íˆ¬í‘œì— í•œ í‘œ ë‚¨ê¸°ê³ , ëŒ“ê¸€ë¡œ ì¶•í•˜ë„ ì „í•´ì£¼ì„¸ìš” âœ¨  
    </p>
    <div class="gallery" id="gallery">
      <div class="thumb"><img src="img/sample_2.png" alt="pic1"></div>
      <div class="thumb"><img src="img/sample_3.png" alt="pic2"></div>
      <div class="thumb"><img src="img/sample_4.png" alt="pic3"></div>
      <div class="thumb"><img src="img/sample_5.png" alt="pic4"></div>
      <div class="thumb"><img src="img/sample_6.png" alt="pic5"></div>
      <div class="thumb"><img src="img/sample_7.png" alt="pic6"></div>
    </div>
  </section>


  <!-- ê³„ì¢Œ & ì¶•í•˜ ë©”ì‹œì§€ -->
  <!-- <section class="wrap section card">
    <h2>ë§ˆìŒ ì „í•˜ì‹¤ ê³³</h2>
    <p class="muted" style="margin-top:0">ì§ì ‘ ëµ™ê¸° ì–´ë ¤ìš´ ë¶„ë“¤ì„ ìœ„í•´ ê³„ì¢Œë²ˆí˜¸ë¥¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</p>
    <div class="grid">
      <div class="row pill">
        <div>
          <div style="font-weight:700">ì‹ ë¶€ ë¯¸ì˜</div>
          <div class="muted" id="accBride">êµ­ë¯¼ 123456-01-000000</div>
        </div>
        <button class="btn" data-copy="accBride">ë³µì‚¬</button>
      </div>
      <div class="row pill">
        <div>
          <div style="font-weight:700">ì‹ ë‘ (ì´ë¦„)</div>
          <div class="muted" id="accGroom">ì‹ í•œ 110-000-000000</div>
        </div>
        <button class="btn" data-copy="accGroom">ë³µì‚¬</button>
      </div>
    </div>
  </section> -->

  <section class="wrap section card" id="photo-vote">
  <h2>ì¸ìƒìƒ· íˆ¬í‘œ ğŸ’</h2>
  <p class="muted" style="margin-top:0;">
    ë§ˆìŒì— ì™ ë“œëŠ” ë¯¸ì˜ì´ì˜ ì¸ìƒìƒ·ì— íˆ¬í‘œí•´ ì£¼ì„¸ìš”!
  </p>
  <div id="photo-vote-grid"></div>
</section>

  	<!-- ì§ˆë¬¸ ì¹´ë“œ ì˜ì—­ -->
	<section class="wrap section card" id="qna-card" style="text-align:center;margin-top:30px;">
	<h2>ğŸ’• ì˜¤ëŠ˜ì˜ ì§ˆë¬¸ ì¹´ë“œ</h2>
	
	<div id="question-box" 
		style="
			background:#ff85852a;
			border-radius:16px;
			padding:26px 20px;
			margin-top:14px;
			min-height:90px;
			display:flex;
			justify-content:center;
			align-items:center;
			font-size:1.05rem;
			color:#7d4a58;
			box-shadow:0 4px 12px rgba(0,0,0,0.06);
			transition:0.25s ease;
			">
		ğŸ‘‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§ˆë¬¸ì„ ë½‘ì•„ë³´ì„¸ìš”!
	</div>

	<button id="draw-question" 
		style="
		margin-top:16px;
		padding:12px 20px;
		border:none;
		border-radius:12px;
		background:#ff8585;
		color:white;
		font-weight:600;
		cursor:pointer;">
		ì§ˆë¬¸ ë½‘ê¸° ğŸŒ¸
	</button>
	</section>


	<!-- ëŒ“ê¸€ ì˜ì—­ -->
	<section id="comments" class="wrap section card" style="margin-top:24px;">
	<h2>ì¶•í•˜ ëŒ“ê¸€ ğŸ’Œ</h2>
  <div id="question-hint" 
     style="display:none; 
            background:#ffefef; 
            padding:12px 10px; 
            border-radius:10px; 
            color:#7a4b58; 
            margin-bottom:10px; 
            font-size:0.9rem;">
</div>
	<div id="comment-list"></div>
	<form id="comment-form" style="display:flex;gap:8px;flex-wrap:wrap;">
		<input id="comment-nick" placeholder="ì´ë¦„"
			style="flex:0 0 140px;padding:10px;border-radius:10px;border:1px solid #ddd">
		<input id="comment-body" placeholder="ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”"
			style="flex:1 1 180px;padding:10px;border-radius:10px;border:1px solid #ddd">
		<button style="padding:10px 16px;border-radius:10px;border:none;
					background:#ff8585;color:#fff;font-weight:600;cursor:pointer;">
		ë³´ë‚´ê¸°
		</button>
	</form>

	<p style="color:#999;font-size:12px;margin-top:6px;">
		ë‚¨ê²¨ì£¼ì‹  ì¶•í•˜ ë©”ì‹œì§€ëŠ” í˜ì´ì§€ì— ì €ì¥ë˜ì–´ ëª¨ë‘ í•¨ê»˜ ë³¼ ìˆ˜ ìˆì–´ìš” âœ¨
	</p>
	</section>

  <!-- RSVP -->
  <section id="rsvp" class="wrap section card">
    <h2>ì²­ì²©ì¥ ëª¨ì„ ì˜ê²¬ ì „ë‹¬</h2>
    <p class="muted">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.</p>
    <!-- êµ¬ê¸€í¼/í‹°ìŠ¤í† ë¦¬/ë„¤ì´ë²„í¼ ë“± ì„¤ë¬¸ URLë¡œ êµì²´ -->
    <a class="btn full" href="https://forms.gle/" target="_blank" rel="noopener">ì˜ê²¬ ì‘ì„±í•˜ê¸°</a>
  </section>

  <!-- ì§€ë„ -->
  <section id="map" class="wrap section card">
    <h2>ì˜¤ì‹œëŠ” ê¸¸</h2>
    <p class="muted">ëŒ€ì¤‘êµí†µ ë° ì£¼ì°¨ ì•ˆë‚´ë¥¼ í•¨ê»˜ ê¸°ì¬í•˜ì„¸ìš”.</p>
    <!-- Google Maps ì¥ì†Œ ê²€ìƒ‰ ì„ë² ë“œ. ì£¼ì†Œ/ì¿¼ë¦¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”. -->
    <div style="border-radius:12px; overflow:hidden">
      <iframe
        src="https://www.google.com/maps?q=ëŒ€êµ¬ì‹œ%20ìˆ˜ì„±êµ¬%20ë™ëŒ€êµ¬ë¡œ%20&output=embed"
        width="100%" height="260" style="border:0" allowfullscreen="" loading="lazy"></iframe>
    </div>
  </section>

  <footer class="foot wrap">
    <div class="divider"></div>
    <p>ëê¹Œì§€ ë´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤ Â· ì œì‘ì: ì¹œêµ¬</p>
    <p>ì´ ì¶•í•˜ì¥ì€ ì¶•í•˜í•˜ëŠ” ë§ˆìŒì— ê°œì¸ì´ ì‘ì„±í•œ ì¶•í•˜ì¥ì…ë‹ˆë‹¤.<br/>ê²°í˜¼ì‹ê´€ë ¨ ìì„¸í•œ ë‚´ìš©ì€ ì²­ì²©ì¥ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”</p>
  </footer>

  <!-- ì´ë¯¸ì§€ ë¼ì´íŠ¸ë°•ìŠ¤ ëª¨ë‹¬ -->
  <div class="modal" id="modal">
    <div class="box"><img id="modalImg" src="" alt="preview"></div>
  </div>

  <script>
    // ===== ì¹´ìš´íŠ¸ë‹¤ìš´ (ë‚ ì§œ ìˆ˜ì •) =====
    const eventDate = new Date('2026-03-14T13:00:00+09:00');
    const $cd = document.getElementById('countdown');
    function two(n){return (n<10? '0':'')+n}
    function tick(){
      const now = new Date();
      const diff = eventDate - now;
      if(diff <= 0){
        $cd.innerHTML = '<span class="chip">TODAY</span>';
        clearInterval(timer); return;
      }
      const d = Math.floor(diff/86400000);
      const h = Math.floor((diff%86400000)/3600000);
      const m = Math.floor((diff%3600000)/60000);
      $cd.innerHTML = `
        <span class="chip"><strong>${d}</strong><br/>ì¼</span>
        <span class="chip"><strong>${two(h)}</strong><br/>ì‹œê°„</span>
        <span class="chip"><strong>${two(m)}</strong><br/>ë¶„</span>`
    }
    const timer = setInterval(tick, 1000); tick();

    // ===== ì´ë¯¸ì§€ ë¼ì´íŠ¸ë°•ìŠ¤ =====
    const modal = document.getElementById('modal');
    const modalImg = document.getElementById('modalImg');
    document.getElementById('gallery').addEventListener('click', (e)=>{
      const t = e.target.closest('.thumb img'); if(!t) return;
      modalImg.src = t.src; modal.classList.add('open');
    });
    modal.addEventListener('click', ()=> modal.classList.remove('open'));

    // ===== ê³„ì¢Œ ë³µì‚¬ =====
    document.querySelectorAll('button[data-copy]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-copy');
        const text = document.getElementById(id).textContent.trim();
        navigator.clipboard.writeText(text).then(()=>{
          btn.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=> btn.textContent = 'ë³µì‚¬', 1000);
        });
      });
    });

    // ===== ìº˜ë¦°ë”(.ics) ì €ì¥ =====
    document.getElementById('addCalendar').addEventListener('click', ()=>{
      const dtStart = '20260314T040000Z'; // KST 13:00 == UTC 04:00
      const dtEnd   = '20260314T060000Z'; // 2ì‹œê°„ í›„
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Invite//KR//KO\nBEGIN:VEVENT\nUID:${Date.now()}@invite\nDTSTAMP:${new Date().toISOString().replace(/[-:]/g,'').split('.')[0]}Z\nDTSTART:${dtStart}\nDTEND:${dtEnd}\nSUMMARY:ë¯¸ì˜ì˜ ê²°í˜¼ì‹\nLOCATION:ì„œìš¸ â—‹â—‹ì›¨ë”©í™€ 3ì¸µ ê·¸ëœë“œí™€\nDESCRIPTION:ì†Œì¤‘í•œ ë‚  í•¨ê»˜ í•´ì£¼ì„¸ìš”\nEND:VEVENT\nEND:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'miyoung_wedding.ics'; a.click();
      URL.revokeObjectURL(url);
    });
	</script>

	<!-- Supabase JS -->
	<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
	<script>
	// ==== 1) ëŒ“ê¸€ ì„¤ì •ê°’ ====
	const SUPABASE_URL = "https://tyevryexhncxfubnkjoe.supabase.co";   // â† êµì²´
	const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR5ZXZyeWV4aG5jeGZ1Ym5ram9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMTE3MDgsImV4cCI6MjA3ODU4NzcwOH0.Z635FtXmHkWu_FxnZI3eJy_e3cZZ05KErw1i4-JlejU";          // â† êµì²´
	const PAGE_ID = "miyoung_wedding";                         // í˜ì´ì§€ ì‹ë³„ì

	const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
	const $list = document.getElementById("comment-list");
	const $form = document.getElementById("comment-form");
	const $nick = document.getElementById("comment-nick");
	const $body = document.getElementById("comment-body");
  
  // ==== ì¸ìƒìƒ· íˆ¬í‘œìš© ì‚¬ì§„ ëª©ë¡ ====
  const photosForVote = [
    { id: "shot1", src: "img/sample_2.png", label: "ì¸ìƒìƒ· 1" },
    { id: "shot2", src: "img/sample_3.png", label: "ì¸ìƒìƒ· 2" },
    { id: "shot3", src: "img/sample_4.png", label: "ì¸ìƒìƒ· 3" },
    { id: "shot4", src: "img/sample_5.png", label: "ì¸ìƒìƒ· 4" },
    { id: "shot5", src: "img/sample_6.png", label: "ì¸ìƒìƒ· 5" },
    { id: "shot6", src: "img/sample_7.png", label: "ì¸ìƒìƒ· 6" },
    // í•„ìš”í•˜ë©´ ì¶”ê°€ë¡œ ë”...
  ];

  const $photoGrid = document.getElementById("photo-vote-grid");

	const esc = s => s.replace(/[&<>\"']/g, c =>
    ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])
	);

  function renderPhotoVotes(rows) {
    if (!$photoGrid) return;
    $photoGrid.innerHTML = "";

    // 1ë“± ë“í‘œìˆ˜ ì°¾ê¸° (0í‘œë©´ ì™•ê´€ ì—†ìŒ)
    const maxVotes = rows.reduce(
      (max, r) => Math.max(max, r.votes || 0),
      0
    );

    photosForVote.forEach((photo) => {
      const row = rows.find(r => r.photo_id === photo.id) || { votes: 0 };
      const votes = row.votes || 0;
      const voted = localStorage.getItem(`photo_voted_${photo.id}`) === "1";
      const isTop = maxVotes > 0 && votes === maxVotes; // ğŸ‘‘ ë‹¬ë¦´ ëŒ€ìƒì¸ì§€

      const card = document.createElement("div");
      card.className = "vote-thumb";
      card.dataset.photoId = photo.id;

      card.innerHTML = `
        ${isTop ? `
          <div class="crown-badge">
            <span>ğŸ‘‘</span> BEST
          </div>
        ` : ""}
        <img src="${photo.src}" alt="${esc(photo.label)}">
        <div class="vote-thumb-body">
          <div class="vote-thumb-title">${esc(photo.label)}</div>
          <button class="photo-vote-btn ${voted ? "voted" : ""}" data-photo-id="${photo.id}">
            ğŸ’– <span>${votes}</span>í‘œ
          </button>
        </div>
      `;

      $photoGrid.appendChild(card);
    });
  }

	function renderComment(item) {
		const el = document.createElement("div");
		el.className = "comment-card";
		el.style.cssText = `
		background:#fff; padding:12px 14px; border-radius:12px; 
		border:1px solid #eee; position:relative;
		`;

		el.innerHTML = `
		<b>${esc(item.nickname)}</b>
		<span style="color:#999;font-size:12px;margin-left:6px;">
			${new Date(item.created_at).toLocaleString()}
		</span>
		<div style="margin-top:6px">${esc(item.body)}</div>

		<button class="like-btn" data-id="${item.id}"
			style="
			position:absolute; right:12px; bottom:12px;
			background:none; border:none; cursor:pointer;
			font-size:18px; color:#f37a9e;">
			â¤ï¸ <span>${item.likes || 0}</span>
		</button>
		`;

		$list.append(el);
	}

 // 1) ëŒ“ê¸€ ì´ˆê¸° ë¶ˆëŸ¬ì˜¤ê¸°
  (async () => {
    const { data } = await sb
      .from("comments")
      .select("*")
      .eq("page_id", PAGE_ID)
      .order("created_at");

    data.forEach(renderComment);
  })();

  // 2) ì‹¤ì‹œê°„ INSERT + UPDATE(ì¢‹ì•„ìš” ë°˜ì˜)
  sb.channel("realtime-comments")
  .on(
    "postgres_changes",
    { event: "*", schema: "public", table: "comments", filter: `page_id=eq.${PAGE_ID}` },
    (payload) => {
      if (payload.eventType === "INSERT") {
        renderComment(payload.new);
		// $list.scrollTop = $list.scrollHeight; // â† ì—¬ê¸° ì¶”ê°€!
		$list.scrollTo({ top: $list.scrollHeight, behavior: "smooth" });


      }
      if (payload.eventType === "UPDATE") {
        const btn = document.querySelector(
          `button.like-btn[data-id="${payload.new.id}"]`
        );
        if (btn) {
          const span = btn.querySelector("span");
          if (span) span.textContent = payload.new.likes;
        }
      }
    }
  )
  .subscribe();


document.addEventListener("click", async (e) => {
  const target = e.target.closest(".photo-vote-btn, .vote-thumb");
  if (!target) return;

  const card = target.classList.contains("vote-thumb")
    ? target
    : target.closest(".vote-thumb");
  if (!card) return;

  const photoId = card.dataset.photoId;
  if (!photoId) return;

  const btn = card.querySelector(".photo-vote-btn");
  const span = btn.querySelector("span");
  const key = `photo_voted_${photoId}`;

  const current = parseInt(span.textContent || "0", 10);
  const alreadyVoted = localStorage.getItem(key) === "1";

  let next = current;
  if (alreadyVoted) {
    next = Math.max(current - 1, 0);
    span.textContent = next;
    btn.classList.remove("voted");
    localStorage.removeItem(key);
  } else {
    next = current + 1;
    span.textContent = next;
    btn.classList.add("voted");
    localStorage.setItem(key, "1");
  }

  const { error } = await sb
    .from("photo_votes")
    .update({ votes: next })
    .eq("page_id", PAGE_ID)
    .eq("photo_id", photoId);

  if (error) {
    console.error(error);
    alert("íˆ¬í‘œ ë°˜ì˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
    // ë¡¤ë°±
    span.textContent = current;
    if (alreadyVoted) {
      btn.classList.add("voted");
      localStorage.setItem(key, "1");
    } else {
      btn.classList.remove("voted");
      localStorage.removeItem(key);
    }
    return;
  }

  // âœ… íˆ¬í‘œ ë°˜ì˜ ì„±ê³µ â†’ ìµœì‹  ë°ì´í„°ë¡œ ì™•ê´€ ì¬ê³„ì‚°
  const { data } = await sb
    .from("photo_votes")
    .select("*")
    .eq("page_id", PAGE_ID);

  renderPhotoVotes(data || []);
});

	// 3) ì¢‹ì•„ìš” ë²„íŠ¼ í´ë¦­ â†’ likes +1
	document.addEventListener("click", async (e) => {
	const btn = e.target.closest(".like-btn");
	if (!btn) return;

	const id = btn.dataset.id;

	// 1) ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼: í†µí†µ íŠ€ê¸°
	btn.classList.remove("pulse");
	void btn.offsetWidth;           // ê°•ì œ ë¦¬í”Œë¡œìš°ë¡œ ì• ë‹ˆë©”ì´ì…˜ ì¬ì‹œì‘
	btn.classList.add("pulse");

	// 2) ìœ„ë¡œ ë‚ ì•„ê°€ëŠ” ì‘ì€ í•˜íŠ¸ ì¶”ê°€
	const flying = document.createElement("span");
	flying.className = "flying-heart";
	flying.textContent = "â¤";
	btn.appendChild(flying);
	setTimeout(() => flying.remove(), 800);

	// 3) Supabaseì—ì„œ í˜„ì¬ likes ê°’ ê°€ì ¸ì™€ì„œ +1
	const { data, error } = await sb
		.from("comments")
		.select("likes")
		.eq("id", id)
		.single();

	if (error) {
		console.error(error);
		return;
	}

	await sb
		.from("comments")
		.update({ likes: (data.likes || 0) + 1 })
		.eq("id", id);

	// ì‹¤ì œ ìˆ«ì ë°˜ì˜ì€ ì‹¤ì‹œê°„ UPDATE ì´ë²¤íŠ¸ì—ì„œ ì²˜ë¦¬ë¨
	});


	// ==== 4) ëŒ“ê¸€ ì „ì†¡ ====
	$form.addEventListener("submit", async (e) => {
	e.preventDefault();
	const nickname = ($nick.value || "Guest").slice(0, 24);
	const body = ($body.value || "").trim();
	if (!body) return;

	// ì…ë ¥ì°½ë§Œ ë¨¼ì € ë¹„ìš°ê³ 
	$nick.value = "";
	$body.value = "";

	// DBì—ë§Œ ì €ì¥ â†’ í™”ë©´ ì¶”ê°€ëŠ” ì‹¤ì‹œê°„ INSERT ì´ë²¤íŠ¸ì—ì„œ ì²˜ë¦¬
	const { error } = await sb
		.from("comments")
		.insert({ page_id: PAGE_ID, nickname, body });

	if (error) {
		console.error(error);
		alert("ëŒ“ê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
	}
	});

    // ==== ì¸ìƒìƒ· íˆ¬í‘œ ë°ì´í„° ì´ˆê¸° ë¡œë“œ ====
  (async () => {
    if (!$photoGrid) return;
    const { data, error } = await sb
      .from("photo_votes")
      .select("*")
      .eq("page_id", PAGE_ID);

    if (error) {
      console.error(error);
      return;
    }
    renderPhotoVotes(data || []);
  })();

	// ì§ˆë¬¸ëª©ë¡
	const questions = [
		"ì‹ ë¶€ì™€ í•¨ê»˜í•œ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€?",
		"ë‘˜ì´ ì •ë§ ì˜ ë§ëŠ”ë‹¤ê³  ëŠë‚€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
		"ì‹ ë¶€ì—ê²Œ í•œë§ˆë”” ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê¸´ë‹¤ë©´?",
		"ë‘˜ì˜ ì²«ì¸ìƒì€ ì–´ë• ë‚˜ìš”?",
		"ì‹ ë¶€ì˜ ê°€ì¥ ê·€ì—¬ìš´ ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
		"ë‘˜ì´ ì˜¤ë˜ì˜¤ë˜ ì˜ ì‚´ ê²ƒ ê°™ë‹¤ê³  ëŠê¼ˆë˜ ìˆœê°„ì€?",
		"ì‹ ë¶€ì™€ í•¨ê»˜ ê°€ê³  ì‹¶ì€ ì—¬í–‰ì§€ëŠ”?",
		"ë‘˜ì˜ ëŸ¬ë¸ŒìŠ¤í† ë¦¬ ì¤‘ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì¥ë©´ì€?",
		"ì‹ ë¶€ì—ê²Œ ë‚˜ë§Œ ì•„ëŠ” TMI í•œ ê°€ì§€!",
		"ë‘ ì‚¬ëŒì„ ë³´ë©° ë– ì˜¤ë¥´ëŠ” ë…¸ë˜ëŠ”?"
	];

	const box = document.getElementById("question-box");
	const btn = document.getElementById("draw-question");

	function getRandomQuestion() {
		return questions[Math.floor(Math.random() * questions.length)];
	}

	function animatePetal() {
	const boxRect = box.getBoundingClientRect();  
	// box: ì§ˆë¬¸ ë°•ìŠ¤ DOM

	const petal = document.createElement("span");
	petal.textContent = "ğŸŒ¸";
	petal.style.cssText = `
		position: fixed;
		left: ${boxRect.left + boxRect.width / 2}px;
		top: ${boxRect.bottom - 20}px;
		font-size: 26px;
		pointer-events: none;
		z-index: 9999;
		animation: qna-petal-fly 1s ease-out forwards;
	`;
	document.body.appendChild(petal);
	setTimeout(() => petal.remove(), 1000);
	}

  let currentQuestion = "";  // ì „ì—­ ë³€ìˆ˜

  btn.addEventListener("click", () => {
    box.style.transform = "scale(0.95)";
    setTimeout(() => (box.style.transform = "scale(1)"), 120);

    animatePetal();

    currentQuestion = getRandomQuestion();   // â­ ì €ì¥
    box.textContent = currentQuestion;

    showQuestionCommentHint();               // â­ ì•ˆë‚´ í‘œì‹œ í•¨ìˆ˜ ì‹¤í–‰
  });
  
	// ê½ƒì ì• ë‹ˆë©”ì´ì…˜ ìŠ¤íƒ€ì¼
	const style = document.createElement("style");
	style.textContent = `
		@keyframes qna-petal-fly {
		0%   { opacity:1; transform:translate(-50%, -50%) scale(1); }
		100% { opacity:0; transform:translate(-50%, -120px) scale(1.4); }
		}
	`;
	document.head.appendChild(style);


  function showQuestionCommentHint() {
  const hint = document.getElementById("question-hint");
  hint.style.display = "block";
  hint.innerHTML = `
    ğŸŒ¸ <b>ì˜¤ëŠ˜ì˜ ì§ˆë¬¸:</b> ${currentQuestion}<br>
    ì•„ë˜ ëŒ“ê¸€ë¡œ ë‹¹ì‹ ì˜ ë‹µë³€ì„ ë‚¨ê²¨ì£¼ì„¸ìš”! ğŸ’•
  `;

  // ëŒ“ê¸€ì°½ ìë™ í¬ì»¤ìŠ¤
  document.getElementById("comment-body").focus();

  // ì§ˆë¬¸ì´ ëŒ“ê¸€ ì…ë ¥ì°½ì˜ ê¸°ë³¸ ë‚´ìš©ì´ ë˜ê²Œ
  document.getElementById("comment-body").value = `[Q] ${currentQuestion} â€” `;
}

   // ===== ë§í¬ ê³µìœ  (Web Share API) =====
    document.getElementById('shareBtn').addEventListener('click', async ()=>{
      const data = {title: document.title, text:'ë¯¸ì˜ì˜ ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œì— ì´ˆëŒ€í•©ë‹ˆë‹¤', url: location.href};
      if(navigator.share){
        try{ await navigator.share(data); }catch(e){ /* ì·¨ì†Œ */ }
      }else{
        await navigator.clipboard.writeText(location.href);
        alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
      }
    });

	// ğŸŒ¸ Flower petal animation
    const numPetals = 25;
    for (let i = 0; i < numPetals; i++) {
      const petal = document.createElement('div');
      petal.classList.add('petal');
      petal.style.left = Math.random() * 100 + 'vw';
      petal.style.animationDuration = 5 + Math.random() * 5 + 's';
      petal.style.animationDelay = Math.random() * 5 + 's';
      petal.style.width = 12 + Math.random() * 16 + 'px';
      petal.style.height = petal.style.width;
      document.body.appendChild(petal);
    }
	</script>

</body>
</html>
