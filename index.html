<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ë¯¸ì˜ì´ì˜ ê²°í˜¼ì„ ì¶•í•˜í•©ë‹ˆë‹¤.</title>
  <meta name="description" content="ë”°ëœ»í•œ ë§ˆìŒì„ ì „í•˜ëŠ” ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œ" />
  <!-- Open Graph for link preview -->
  <meta property="og:title" content="ë¯¸ì˜ì˜ ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œì— ì´ˆëŒ€í•©ë‹ˆë‹¤" />
  <meta property="og:description" content="ì†Œì¤‘í•œ ì‘ì›ê³¼ í•¨ê»˜ í•´ì£¼ì„¸ìš”" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://raw.githubusercontent.com/jaunnnngs/mobileWedding/main/img/sample_1.png" />
  <meta property="og:url" content="https://jaunnnngs.github.io/mobileWedding/" />
  <!-- í°íŠ¸ ê´€ë ¨ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Allura&display=swap" rel="stylesheet">
  
  <style>
    :root{
      --bg:#fffaf8; --ink:#1f2937; --muted:#6b7280; --brand:#ff8585; --soft:#f8e7e2; --card:#ffffff;
      --radius:18px; --shadow:0 6px 18px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;}
    a{color:inherit}
    img{max-width:100%;display:block}
    .wrap{max-width:720px;margin:0 auto;padding:16px}
    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}
    .hero{position:relative;border-radius:var(--radius);overflow:hidden}
    .hero img{width:100%;height:100%;object-fit:cover;filter:brightness(.9)}
    .hero .overlay{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;text-align:center;padding:24px}
    .badge{padding:20% 10px;}
    h1{margin:10px 0 0;font-size:28px;}
    h2{margin:0;font-size:20px;color:var(--brand)}
    .muted{color:var(--muted)}
    .section{margin:18px auto}
    .grid{display:grid;gap:12px}
    .grid.two{grid-template-columns:repeat(2,1fr)}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#fff;border:none;border-radius:12px;padding:12px 16px;font-weight:600;cursor:pointer;box-shadow:var(--shadow)}
    .btn.ghost{background:#fff;color:var(--brand);border:1px solid var(--brand)}
    .btn.full{width:100%;justify-content:center}
    .row{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .pill{background:var(--soft);padding:10px 12px;border-radius:12px}
    .kv{display:grid;grid-template-columns:110px 1fr;gap:8px;align-items:start}
    .kv strong{display:block;color:var(--muted);font-size:13px}
    .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(0,0,0,.08),transparent);margin:14px 0}
    .gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
    .thumb{aspect-ratio:1/1;border-radius:10px;overflow:hidden;cursor:pointer}
    .foot{text-align:center;color:var(--muted);font-size:12px;padding:24px 8px}
    .countdown{display:flex;gap:8px;justify-content:center}
    .chip{background:#ff8585;border:1px solid #eee;border-radius:10px;padding:8px 10px;min-width:58px;text-align:center;}

    /* Modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:center;padding:16px}
    .modal.open{display:grid}
    .modal .box{background:#000;max-width:720px;width:100%;border-radius:12px;overflow:hidden}
    .modal img{width:100%;height:100%}

    /* Responsive */
    @media(min-width:720px){
      h1{font-size:36px}
      .hero img{height:100%}
    }

	/* ğŸŒ¸ Flower Petal Animation */
    .petal {
      position: fixed;
      top: -10%;
      width: 20px;
      height: 20px;
      background: radial-gradient(circle at 30% 30%, #ffc0cb 40%, transparent 60%);
      border-radius: 50%;
      opacity: 0.9;
      animation: fall linear infinite;
    }

	@keyframes fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0.3;
      }
    }

	/* ì¸íŠ¸ë¡œ í•„ê¸°ì²´ ì œëª© */
	.english {
      font-family: "Allura", cursive;
      font-weight: auto;
      font-style: normal;
      font-size: 2.5rem;
      text-align: center;
      margin-bottom: 35px;
      /* margin-top: 80px; */
      color: #ff8585;
    }

    /* ëŒ“ê¸€ ëª©ë¡ */
	#comment-list {
		display:flex;
		flex-direction:column;
		gap:10px;
		margin:12px 0;
		max-height: 350px;   /* ì¹´ë“œ ì•ˆì— ë³´ì¼ ìµœëŒ€ ë†’ì´ */
		overflow-y: auto;     /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ */
		padding-right: 6px;   /* ìŠ¤í¬ë¡¤ë°” ê³µê°„ */
	}

	/* ì¢‹ì•„ìš” ë²„íŠ¼ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì¡°ê¸ˆ ë‹¤ë“¬ê¸° */
	.like-btn {
	position: relative;
	background: none;
	border: none;
	cursor: pointer;
	font-size: 18px;
	color: #f37a9e;
	display: inline-flex;
	align-items: center;
	gap: 4px;
	}

	/* í•˜íŠ¸ ëˆŒë €ì„ ë•Œ í†µí†µ íŠ€ëŠ” íš¨ê³¼ */
	.like-btn.pulse {
	animation: heart-pop 0.35s ease-out;
	}

	@keyframes heart-pop {
	0%   { transform: scale(1); }
	40%  { transform: scale(1.3); }
	100% { transform: scale(1); }
	}

	/* ìœ„ë¡œ ë‚ ì•„ê°€ëŠ” ì‘ì€ í•˜íŠ¸ */
	.flying-heart {
	position: absolute;
	left: 50%;
	bottom: 0;
	transform: translateX(-50%);
	font-size: 14px;
	pointer-events: none;
	animation: heart-fly 0.8s ease-out forwards;
	}

	@keyframes heart-fly {
	0% {
		opacity: 1;
		transform: translate(-50%, 0) scale(1);
	}
	100% {
		opacity: 0;
		transform: translate(-50%, -30px) scale(1.3);
	}
	}

/* ì‚¬ì§„ íˆ¬í‘œ grid */
  #photo-vote-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 12px;
}

/* ì¸ìƒìƒ· íˆ¬í‘œìš© ì¹´ë“œ */
.vote-thumb {
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  cursor: pointer;
  display: flex;
  flex-direction: column;
}

.vote-thumb img {
  width: 100%;
  display: block;
}

.vote-thumb-body {
  padding: 8px 8px 10px;
  text-align: center;
  font-size: 0.9rem;
}

.vote-thumb-title {
  font-weight: 600;
  margin-bottom: 4px;
}

.vote-thumb button.photo-vote-btn {
  border: none;
  border-radius: 999px;
  padding: 6px 10px;
  font-size: 0.8rem;
  cursor: pointer;
  background: #ff8585;
  color: #fff;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.vote-thumb button.photo-vote-btn.voted {
  background: #ffe0eb;
  color: #ff8585;
}


/* ì¸ìƒìƒ· ì™•ê´€ ì”Œìš°ê¸° */
.vote-thumb {
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
  box-shadow: 0 4px 10px rgba(0,0,0,0.06);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  position: relative; /* ğŸ‘ˆ ì™•ê´€ ìœ„ì¹˜ ê¸°ì¤€ */
}

.crown-badge {
  position: absolute;
  top: 8px;
  left: 8px;
  background: rgba(255, 215, 0, 0.92);
  color: #7a4b00;
  font-size: 0.75rem;
  padding: 4px 8px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 4px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

.crown-badge span {
  font-size: 0.9rem;
}

  </style>
</head>

<body>
  <header class="wrap section">
    <nav class="row">
      <div class=""></div>
      <div class="row" style="gap:8px">
        <a class="btn ghost" href="#comments">ëŒ“ê¸€ë‚¨ê¸°ê¸°</a>
        <button class="btn ghost" id="shareBtn">ê³µìœ </button>
      </div>
    </nav>
  </header>
  <!-- HERO Cover -->
  <section class="wrap section card">
	  <!-- ğŸ’’ ğŸ’•-->
	<h1 class="english"> Blessings on your marriage. </h1>
    <div class="hero">
      <!-- ì»¤ë²„ ì´ë¯¸ì§€ êµì²´: cover.jpg -->
      <img src="img/sample_1.png" alt="wedding cover" />
      <div class="overlay">
        <span class="badge"></span>
        <h1>ë¯¸ì˜ Â· (ì‹ ë‘)</h1>
        <p class="muted" style="margin:4px 0 12px">ì˜ˆì‹œ) 2026ë…„ 3ì›” 14ì¼ í† ìš”ì¼ ì˜¤í›„ 1ì‹œ</p>
        <div class="countdown" id="countdown"></div>
      </div>
    </div>
  </section>

  <!-- ì¸ì‚¬ë§ & ê¸°ë³¸ ì •ë³´ -->
  <!-- <section class="wrap section card">
    
    <div class="divider"></div>
    <div class="grid two">
      <button class="btn full" id="addCalendar">ìº˜ë¦°ë” ì €ì¥</button>
      <a class="btn full" href="#map">ì˜¤ì‹œëŠ” ê¸¸</a>
    </div>
  </section> -->

  <section class="wrap section card">
  <h2>ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œ ì•ˆë‚´ ğŸ€</h2>
  <p class="muted" style="margin-top:4px;">
    ì–´ì„œ ì™€ìš”! ë¯¸ì˜ì´ë¥¼<br/> ìœ„í•œ ì‘ì€ ë¸Œë¼ì´ëœ ìƒ¤ì›Œ ê³µê°„ì´ì—ìš” ğŸ’•  
  </p>

  <div style="
      background:#ffefef;
      padding:18px 16px;
      border-radius:14px;
      margin-top:12px;
      color:#7a4b58;
      line-height:1.56;
      box-shadow:0 3px 10px rgba(0,0,0,0.05);
    ">
    <p style="margin:0 0 10px 0;"><b>ì—¬ê¸°ì—ì„œ í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” ê²ƒë“¤:</b></p>

    <ul style="padding-left:18px; margin:0;">
      <li>ğŸ’ ë‘ ì‚¬ëŒ ì›¨ë”© ì‚¬ì§„ êµ¬ê²½</li>
      <li>ğŸ‘‘ â€˜ì¸ìƒìƒ· íˆ¬í‘œâ€™ë¡œ ë² ìŠ¤íŠ¸ ì‚¬ì§„ ë½‘ê¸°</li>
      <li>ğŸŒ¸ ëœë¤ â€˜ì§ˆë¬¸ ì¹´ë“œâ€™ë¥¼ ë½‘ì•„ ì¬ë¯¸ë‚œ ë‹µ ë‚¨ê¸°ê¸°</li>
      <li>ğŸ’Œ ì¶•í•˜ ëŒ“ê¸€ ë‚¨ê¸°ê¸°</li>
      <li>ğŸ’– ë§ˆìŒì— ë“œëŠ” ê¸€ê³¼ ì‚¬ì§„ì— í•˜íŠ¸ë¡œ ì‘ì› ë³´ë‚´ê¸°</li>
    </ul>

    <p style="margin:14px 0 0 0; font-size:0.9rem; color:#9c7080;">
      ì§§ì€ í•œë§ˆë””ë¼ë„ ì‹ ë¶€ì—ê²Œ í° í˜ì´ ë  ê±°ì˜ˆìš”.  
      ë”°ëœ»í•œ ë§ˆìŒì„ ë¶€íƒë“œë¦´ê²Œìš” âœ¨
    </p>
  </div>
</section>
  <!-- ê°¤ëŸ¬ë¦¬ -->
  <section class="wrap section card">
    <h2> í¬í†  ì½”ë„ˆ ğŸŒ¸</h2>
    <p class="muted" style="margin-top:4px;">
      ğŸ“¸ ì•„ë˜ì˜ ì›¨ë”© ì‚¬ì§„ë“¤ì€ ë¯¸ì˜ì´ì˜ í–‰ë³µí•œ ìˆœê°„ë“¤ì„ ë‹´ì•˜ì–´ìš”.<br>
        ëˆˆì— ë“¤ì–´ì˜¤ëŠ” ì‚¬ì§„ì´ ìˆë‹¤ë©´ ì¸ìƒìƒ· íˆ¬í‘œì— í•œ í‘œ ë‚¨ê¸°ê³ , ëŒ“ê¸€ë¡œ ì¶•í•˜ë„ ì „í•´ì£¼ì„¸ìš” âœ¨  
    </p>
    <div class="gallery" id="gallery">
      <div class="thumb"><img src="img/sample_2.png" alt="pic1"></div>
      <div class="thumb"><img src="img/sample_3.png" alt="pic2"></div>
      <div class="thumb"><img src="img/sample_4.png" alt="pic3"></div>
      <div class="thumb"><img src="img/sample_5.png" alt="pic4"></div>
      <div class="thumb"><img src="img/sample_6.png" alt="pic5"></div>
      <div class="thumb"><img src="img/sample_7.png" alt="pic6"></div>
    </div>
  </section>


  <!-- ê³„ì¢Œ & ì¶•í•˜ ë©”ì‹œì§€ -->
  <!-- <section class="wrap section card">
    <h2>ë§ˆìŒ ì „í•˜ì‹¤ ê³³</h2>
    <p class="muted" style="margin-top:0">ì§ì ‘ ëµ™ê¸° ì–´ë ¤ìš´ ë¶„ë“¤ì„ ìœ„í•´ ê³„ì¢Œë²ˆí˜¸ë¥¼ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</p>
    <div class="grid">
      <div class="row pill">
        <div>
          <div style="font-weight:700">ì‹ ë¶€ ë¯¸ì˜</div>
          <div class="muted" id="accBride">êµ­ë¯¼ 123456-01-000000</div>
        </div>
        <button class="btn" data-copy="accBride">ë³µì‚¬</button>
      </div>
      <div class="row pill">
        <div>
          <div style="font-weight:700">ì‹ ë‘ (ì´ë¦„)</div>
          <div class="muted" id="accGroom">ì‹ í•œ 110-000-000000</div>
        </div>
        <button class="btn" data-copy="accGroom">ë³µì‚¬</button>
      </div>
    </div>
  </section> -->

  <section class="wrap section card" id="photo-vote">
  <h2>ì¸ìƒìƒ· íˆ¬í‘œ ğŸ’</h2>
  <p class="muted" style="margin-top:0;">
    ë§ˆìŒì— ì™ ë“œëŠ” ë¯¸ì˜ì´ì˜ ì¸ìƒìƒ·ì— íˆ¬í‘œí•´ ì£¼ì„¸ìš”!
  </p>
  <div id="photo-vote-grid"></div>
</section>

  	<!-- ì§ˆë¬¸ ì¹´ë“œ ì˜ì—­ -->
	<!-- ì§ˆë¬¸ ì¹´ë“œ + ë‹µë³€ ì…ë ¥ ì˜ì—­ -->
<section class="wrap section card" id="qna-card" style="text-align:center;margin-top:30px;">
  <h2>ğŸ’• ë‘ì‚¬ëŒì˜ ì§ˆë¬¸ ì¹´ë“œ</h2>

  <!-- ì§ˆë¬¸ ì¹´ë“œ -->
  <div id="question-box" 
       style="
        background:#ff85852a;
        border-radius:16px;
        padding:26px 20px;
        margin-top:14px;
        min-height:90px;
        display:flex;
        justify-content:center;
        align-items:center;
        font-size:1.05rem;
        color:#7d4a58;
        box-shadow:0 4px 12px rgba(0,0,0,0.06);
        transition:0.25s ease;
       ">
    ğŸ‘‰ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì§ˆë¬¸ì„ ë½‘ì•„ë³´ì„¸ìš”!
  </div>

  <!-- ì§ˆë¬¸ ë½‘ê¸° ë²„íŠ¼ -->
  <button id="draw-question" 
          style="
            margin-top:16px;
            padding:12px 20px;
            border:none;
            border-radius:12px;
            background:#ff8585;
            color:white;
            font-weight:600;
            cursor:pointer;">
    ì§ˆë¬¸ ë½‘ê¸° ğŸŒ¸
  </button>

  <!-- â†“â†“â†“ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ ì…ë ¥ ì˜ì—­ (ì§ˆë¬¸ ë½‘ì€ ë’¤ì—ë§Œ ë³´ì´ê²Œ) -->
  <div id="qna-answer-area" 
       style="
        margin-top:18px;
        padding:14px 12px;
        border-radius:12px;
        background:#fff7fa;
        text-align:left;
        display:none;
       ">
    <p style="margin:0 0 8px 0; font-size:0.9rem; color:#7d4a58;">
      <b>ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‚˜ì˜ ë‹µë³€ì„ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’¬</b>
    </p>

    <!-- í˜„ì¬ ì§ˆë¬¸ í…ìŠ¤íŠ¸ ê°„ë‹¨ í‘œì‹œ -->
    <p id="qna-current-question-text" 
       style="margin:0 0 10px 0; font-size:0.85rem; color:#9c7080;">
      <!-- JSì—ì„œ ì±„ì›Œì¤Œ -->
    </p>

    <!-- ë‹µë³€ ì…ë ¥ í¼ -->
    <form id="qna-form" style="display:flex;flex-wrap:wrap;gap:8px;">
      <input id="qna-nick" placeholder="ì´ë¦„"
             style="flex:0 0 140px;padding:10px;border-radius:10px;border:1px solid #ddd">
      <input id="qna-body" placeholder="ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‚´ ë‹µë³€ì„ ì ì–´ì£¼ì„¸ìš”"
             style="flex:1 1 180px;padding:10px;border-radius:10px;border:1px solid #ddd">
      <button style="
        padding:10px 16px;
        border-radius:10px;
        border:none;
        background:#ff8585;
        color:#fff;
        font-weight:600;
        cursor:pointer;">
        ë‹µë³€ ë³´ë‚´ê¸°
      </button>
    </form>

    <!-- ì§ˆë¬¸ë³„ ë‹µë³€ ëª¨ì•„ë³´ê¸° ë²„íŠ¼ -->
    <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center;">
      <span id="qna-answer-count" style="font-size:0.8rem;color:#9c7080;">
        ì•„ì§ ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì´ ì—†ì–´ìš”.
      </span>
      <button id="qna-view-answers"
              style="
                padding:8px 12px;
                border-radius:999px;
                border:1px solid #ffb3c8;
                background:#fff;
                font-size:0.8rem;
                color:#ff658a;
                cursor:pointer;">
        ì´ ì§ˆë¬¸ì— ë‹¬ë¦° ë‹µë³€ ëª¨ì•„ë³´ê¸° ğŸ‘€
      </button>
    </div>
  </div>
</section>

	<!-- ëŒ“ê¸€ ì˜ì—­ -->
	<section id="comments" class="wrap section card" style="margin-top:24px;">
	<h2>ì¶•í•˜ ëŒ“ê¸€ ğŸ’Œ</h2>
  <div id="question-hint" 
     style="display:none; 
            background:#ffefef; 
            padding:12px 10px; 
            border-radius:10px; 
            color:#7a4b58; 
            margin-bottom:10px; 
            font-size:0.9rem;">
</div>
	<div id="comment-list"></div>
	<form id="comment-form" style="display:flex;gap:8px;flex-wrap:wrap;">
		<input id="comment-nick" placeholder="ì´ë¦„"
			style="flex:0 0 140px;padding:10px;border-radius:10px;border:1px solid #ddd">
		<input id="comment-body" placeholder="ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”"
			style="flex:1 1 180px;padding:10px;border-radius:10px;border:1px solid #ddd">
		<button style="padding:10px 16px;border-radius:10px;border:none;
					background:#ff8585;color:#fff;font-weight:600;cursor:pointer;">
		ë³´ë‚´ê¸°
		</button>
	</form>

	<p style="color:#999;font-size:12px;margin-top:6px;">
		ë‚¨ê²¨ì£¼ì‹  ì¶•í•˜ ë©”ì‹œì§€ëŠ” í˜ì´ì§€ì— ì €ì¥ë˜ì–´ ëª¨ë‘ í•¨ê»˜ ë³¼ ìˆ˜ ìˆì–´ìš” âœ¨
	</p>
	</section>

  <section id="meetup" class="wrap section card">
  <h2>ì²­ì²©ì¥ ëª¨ì„ ë‚ ì§œ ì˜ê²¬ ëª¨ìœ¼ê¸° ğŸ“…</h2>
  <p class="muted" style="margin-top:4px;">
    ì¢…ì´ ì²­ì²©ì¥ì„ ë‚˜ëˆ„ëŠ” ì‘ì€ ëª¨ì„ ë‚ ì§œë¥¼ ì •í•˜ë ¤ê³  í•´ìš”.<br>
    ê°€ëŠ¥í•œ ë‚ ì§œì™€ í•¨ê»˜ ê°„ë‹¨í•œ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ’Œ
  </p>

  <!-- ì˜ê²¬ ì‘ì„± í¼ -->
  <form id="meetup-form" style="display:flex;flex-wrap:wrap;gap:8px;margin-top:12px;">
    <input id="meet-name" placeholder="ì´ë¦„"
           style="flex:0 0 140px;padding:10px;border-radius:10px;border:1px solid #ddd">
    <input id="meet-date" type="date"
           style="flex:1 1 160px;padding:10px;border-radius:10px;border:1px solid #ddd">
    <input id="meet-note" placeholder="ì›í•˜ëŠ” ì‹œê°„ëŒ€ë‚˜ ì¥ì†Œ, í•œë§ˆë”” ì˜ê²¬ :)"
           style="flex:1 1 100%;padding:10px;border-radius:10px;border:1px solid #ddd">
    <button style="
      padding:10px 16px;
      border-radius:10px;
      border:none;
      background:#ff8585;
      color:#fff;
      font-weight:600;
      cursor:pointer;">
      ì˜ê²¬ ë³´ë‚´ê¸°
    </button>
  </form>

  <p style="color:#999;font-size:12px;margin-top:6px;">
    â€» í›„ë³´ ë‚ ì§œëŠ” ì‹ ë¶€ê°€ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•  ì˜ˆì •ì´ì—ìš”. í¸í•˜ê²Œ ì ì–´ì£¼ì„¸ìš” âœ¨
  </p>

  <!-- ë‚ ì§œë³„ ìš”ì•½ -->
  <div id="meetup-summary" style="margin-top:14px;padding:10px;border-radius:10px;background:#fff7fa;font-size:0.9rem;color:#7d4a58;">
    ì•„ì§ ëª¨ì„ ë‚ ì§œ ì˜ê²¬ì´ ì—†ì–´ìš”. ì²« ë²ˆì§¸ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸŒ¸
  </div>

  <!-- ê°œë³„ ì˜ê²¬ ëª©ë¡ -->
  <div id="meetup-list" style="margin-top:10px;max-height:260px;overflow-y:auto;padding-right:4px;">
    <!-- JSë¡œ ëª©ë¡ ë Œë”ë§ -->
  </div>
</section>

  <!-- RSVP -->
  <!-- <section id="rsvp" class="wrap section card">
    <h2>ì²­ì²©ì¥ ëª¨ì„ ì˜ê²¬ ì „ë‹¬</h2>
    <p class="muted">ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜ê²¬ì„ ë‚¨ê²¨ì£¼ì„¸ìš”.</p>
    êµ¬ê¸€í¼/í‹°ìŠ¤í† ë¦¬/ë„¤ì´ë²„í¼ ë“± ì„¤ë¬¸ URLë¡œ êµì²´
    <a class="btn full" href="https://forms.gle/" target="_blank" rel="noopener">ì˜ê²¬ ì‘ì„±í•˜ê¸°</a>
  </section> -->

  <!-- ì§€ë„ -->
  <!-- Google Maps ì¥ì†Œ ê²€ìƒ‰ ì„ë² ë“œ. ì£¼ì†Œ/ì¿¼ë¦¬ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”. -->
  <!-- <section id="map" class="wrap section card">
    <h2>ì˜¤ì‹œëŠ” ê¸¸</h2>
    <p class="muted">ëŒ€ì¤‘êµí†µ ë° ì£¼ì°¨ ì•ˆë‚´ë¥¼ í•¨ê»˜ ê¸°ì¬í•˜ì„¸ìš”.</p>
    <div style="border-radius:12px; overflow:hidden">
      <iframe
        src="https://www.google.com/maps?q=ëŒ€êµ¬ì‹œ%20ìˆ˜ì„±êµ¬%20ë™ëŒ€êµ¬ë¡œ%20&output=embed"
        width="100%" height="260" style="border:0" allowfullscreen="" loading="lazy"></iframe>
    </div>
  </section> -->


  <footer class="foot wrap">
  <div class="divider"></div>
  <p> ëê¹Œì§€ ë´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤Â·<br/></p>
  <p> ì œì‘ì: ì‹ ë¶€ ì¹œêµ¬</p>
  <p> ì´ ì¶•í•˜ì¥ì€ ê°œì¸ì´ ì‘ì„±í•œ ì¶•í•˜ì¥ì…ë‹ˆë‹¤.<br/></p>
  <p style="margin-top:6px;font-size:12px;color:#9ca3af;">
    ì´ ì¶•í•˜ì¥ ê´€ë ¨ ë¬¸ì˜ë‚˜ ìˆ˜ì • ìš”ì²­ì€
    <a href="mailto:jaunnnngs@naver.com"
       style="color:#ff8585;text-decoration:none;font-weight:500;">
      jaunnnngs@naver.com
    </a>
    ë¡œ í¸í•˜ê²Œ ë³´ë‚´ì£¼ì„¸ìš” ğŸ’Œ
  </p>
</footer>
  <!-- ì´ë¯¸ì§€ ë¼ì´íŠ¸ë°•ìŠ¤ ëª¨ë‹¬ -->
  <div class="modal" id="modal">
    <div class="box"><img id="modalImg" src="" alt="preview"></div>
  </div>


  <!-- âœ… 1. ìƒë‹¨ ì¹´ìš´íŠ¸ë‹¤ìš´/ê³µìœ  ìŠ¤í¬ë¦½íŠ¸ (ì²« ë²ˆì§¸ <script>) -->
<script>
  // ===== ì¹´ìš´íŠ¸ë‹¤ìš´ (ë‚ ì§œ ìˆ˜ì •) =====
  const eventDate = new Date('2026-03-14T13:00:00+09:00');
  const $cd = document.getElementById('countdown');
  function two(n){return (n<10? '0':'')+n}
  function tick(){
    const now = new Date();
    const diff = eventDate - now;
    if(diff <= 0){
      $cd.innerHTML = '<span class="chip">TODAY</span>';
      clearInterval(timer); return;
    }
    const d = Math.floor(diff/86400000);
    const h = Math.floor((diff%86400000)/3600000);
    const m = Math.floor((diff%3600000)/60000);
    $cd.innerHTML = `
      <span class="chip"><strong>${d}</strong><br/>ì¼</span>
      <span class="chip"><strong>${two(h)}</strong><br/>ì‹œê°„</span>
      <span class="chip"><strong>${two(m)}</strong><br/>ë¶„</span>`
  }
  const timer = setInterval(tick, 1000); tick();

  // ===== ì´ë¯¸ì§€ ë¼ì´íŠ¸ë°•ìŠ¤ =====
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modalImg');
  document.getElementById('gallery').addEventListener('click', (e)=>{
    const t = e.target.closest('.thumb img'); if(!t) return;
    modalImg.src = t.src; modal.classList.add('open');
  });
  modal.addEventListener('click', ()=> modal.classList.remove('open'));

  // ===== (í˜„ì¬ëŠ” ì‚¬ìš© ì•ˆ í•¨) ìº˜ë¦°ë”(.ics) ì €ì¥ - ë²„íŠ¼ ìˆìœ¼ë©´ë§Œ ë™ì‘ =====
  const addCalBtn = document.getElementById('addCalendar');
  if(addCalBtn){
    addCalBtn.addEventListener('click', ()=>{
      const dtStart = '20260314T040000Z'; // KST 13:00 == UTC 04:00
      const dtEnd   = '20260314T060000Z'; // 2ì‹œê°„ í›„
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Invite//KR//KO\nBEGIN:VEVENT\nUID:${Date.now()}@invite\nDTSTAMP:${new Date().toISOString().replace(/[-:]/g,'').split('.')[0]}Z\nDTSTART:${dtStart}\nDTEND:${dtEnd}\nSUMMARY:ë¯¸ì˜ì˜ ê²°í˜¼ì‹\nLOCATION:ì„œìš¸ â—‹â—‹ì›¨ë”©í™€ 3ì¸µ ê·¸ëœë“œí™€\nDESCRIPTION:ì†Œì¤‘í•œ ë‚  í•¨ê»˜ í•´ì£¼ì„¸ìš”\nEND:VEVENT\nEND:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'miyoung_wedding.ics'; a.click();
      URL.revokeObjectURL(url);
    });
  }

  // ===== ë§í¬ ê³µìœ  (Web Share API) =====
  document.getElementById('shareBtn').addEventListener('click', async ()=>{
    const data = {title: document.title, text:'ë¯¸ì˜ì˜ ëœì„  ë¸Œë¼ì´ëœ ìƒ¤ì›Œì— ì´ˆëŒ€í•©ë‹ˆë‹¤', url: location.href};
    if(navigator.share){
      try{ await navigator.share(data); }catch(e){ /* ì·¨ì†Œ */ }
    }else{
      await navigator.clipboard.writeText(location.href);
      alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
    }
  });

  // ğŸŒ¸ ë°°ê²½ ê½ƒì ì• ë‹ˆë©”ì´ì…˜
  const numPetals = 25;
  for (let i = 0; i < numPetals; i++) {
    const petal = document.createElement('div');
    petal.classList.add('petal');
    petal.style.left = Math.random() * 100 + 'vw';
    petal.style.animationDuration = 5 + Math.random() * 5 + 's';
    petal.style.animationDelay = Math.random() * 5 + 's';
    petal.style.width = 12 + Math.random() * 16 + 'px';
    petal.style.height = petal.style.width;
    document.body.appendChild(petal);
  }

  // ===== ê³„ì¢Œ ë³µì‚¬ =====
    document.querySelectorAll('button[data-copy]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-copy');
        const text = document.getElementById(id).textContent.trim();
        navigator.clipboard.writeText(text).then(()=>{
          btn.textContent = 'ë³µì‚¬ë¨';
          setTimeout(()=> btn.textContent = 'ë³µì‚¬', 1000);
        });
      });
    });

    // ===== ìº˜ë¦°ë”(.ics) ì €ì¥ =====
    document.getElementById('addCalendar').addEventListener('click', ()=>{
      const dtStart = '20260314T040000Z'; // KST 13:00 == UTC 04:00
      const dtEnd   = '20260314T060000Z'; // 2ì‹œê°„ í›„
      const ics = `BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//Invite//KR//KO\nBEGIN:VEVENT\nUID:${Date.now()}@invite\nDTSTAMP:${new Date().toISOString().replace(/[-:]/g,'').split('.')[0]}Z\nDTSTART:${dtStart}\nDTEND:${dtEnd}\nSUMMARY:ë¯¸ì˜ì˜ ê²°í˜¼ì‹\nLOCATION:ì„œìš¸ â—‹â—‹ì›¨ë”©í™€ 3ì¸µ ê·¸ëœë“œí™€\nDESCRIPTION:ì†Œì¤‘í•œ ë‚  í•¨ê»˜ í•´ì£¼ì„¸ìš”\nEND:VEVENT\nEND:VCALENDAR`;
      const blob = new Blob([ics], {type:'text/calendar'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'miyoung_wedding.ics'; a.click();
      URL.revokeObjectURL(url);
    });
</script>


<!-- âœ… 2. Supabase + ëŒ“ê¸€ + ì¸ìƒìƒ· + ì§ˆë¬¸ì¹´ë“œ + Q&Aì €ì¥ (ë‘ ë²ˆì§¸ <script>) -->


<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  // ==== 1) Supabase ì„¤ì •ê°’ ====
  const SUPABASE_URL = "https://tyevryexhncxfubnkjoe.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR5ZXZyeWV4aG5jeGZ1Ym5ram9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMTE3MDgsImV4cCI6MjA3ODU4NzcwOH0.Z635FtXmHkWu_FxnZI3eJy_e3cZZ05KErw1i4-JlejU";
  const PAGE_ID = "miyoung_wedding";

  const sb = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  const $list = document.getElementById("comment-list");
  const $form = document.getElementById("comment-form");
  const $nick = document.getElementById("comment-nick");
  const $body = document.getElementById("comment-body");

  // HTML íŠ¹ìˆ˜ë¬¸ì ì´ìŠ¤ì¼€ì´í”„
  const esc = s => (s || "").replace(/[&<>\"']/g, c =>
    ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])
  );

  // ==== 2) ì¸ìƒìƒ· íˆ¬í‘œìš© ì‚¬ì§„ ëª©ë¡ ====
  const photosForVote = [
    { id: "shot1", src: "img/sample_2.png", label: "ì¸ìƒìƒ· 1" },
    { id: "shot2", src: "img/sample_3.png", label: "ì¸ìƒìƒ· 2" },
    { id: "shot3", src: "img/sample_4.png", label: "ì¸ìƒìƒ· 3" },
    { id: "shot4", src: "img/sample_5.png", label: "ì¸ìƒìƒ· 4" },
    { id: "shot5", src: "img/sample_6.png", label: "ì¸ìƒìƒ· 5" },
    { id: "shot6", src: "img/sample_7.png", label: "ì¸ìƒìƒ· 6" },
  ];

  const $photoGrid = document.getElementById("photo-vote-grid");
  let photoVoteRows = []; // ì¸ìƒìƒ· íˆ¬í‘œ ë°ì´í„° ìºì‹œ

  function renderPhotoVotes(rows) {
    if (!$photoGrid) return;
    $photoGrid.innerHTML = "";

    const maxVotes = rows.reduce(
      (max, r) => Math.max(max, r.votes || 0),
      0
    );

    photosForVote.forEach((photo) => {
      const row = rows.find(r => r.photo_id === photo.id) || { votes: 0 };
      const votes = row.votes || 0;
      const voted = localStorage.getItem(`photo_voted_${photo.id}`) === "1";
      const isTop = maxVotes > 0 && votes === maxVotes;

      const card = document.createElement("div");
      card.className = "vote-thumb";
      card.dataset.photoId = photo.id;

      card.innerHTML = `
        ${isTop ? `
          <div class="crown-badge">
            <span>ğŸ‘‘</span> BEST
          </div>
        ` : ""}
        <img src="${photo.src}" alt="${esc(photo.label)}">
        <div class="vote-thumb-body">
          <div class="vote-thumb-title">${esc(photo.label)}</div>
          <button class="photo-vote-btn ${voted ? "voted" : ""}" data-photo-id="${photo.id}">
            ğŸ’– <span>${votes}</span>í‘œ
          </button>
        </div>
      `;

      $photoGrid.appendChild(card);
    });
  }

  // ì´ˆê¸° ì¸ìƒìƒ· íˆ¬í‘œ ë°ì´í„° ë¡œë“œ
  (async () => {
    if (!$photoGrid) return;
    const { data, error } = await sb
      .from("photo_votes")
      .select("*")
      .eq("page_id", PAGE_ID);

    if (error) {
      console.error(error);
      return;
    }
    photoVoteRows = data || [];
    renderPhotoVotes(photoVoteRows);
  })();


  // ==== 3) ëŒ“ê¸€ ë Œë”ë§ ====
  function renderComment(item) {
    const el = document.createElement("div");
    el.className = "comment-card";
    el.style.cssText = `
      background:#fff; padding:12px 14px; border-radius:12px; 
      border:1px solid #eee; position:relative;
    `;

    el.innerHTML = `
      <b>${esc(item.nickname)}</b>
      <span style="color:#999;font-size:12px;margin-left:6px;">
        ${item.created_at ? new Date(item.created_at).toLocaleString() : ""}
      </span>
      <div style="margin-top:6px">${esc(item.body)}</div>

      <button class="like-btn" data-id="${item.id}"
        style="
          position:absolute; right:12px; bottom:12px;
          background:none; border:none; cursor:pointer;
          font-size:18px; color:#f37a9e;">
        â¤ï¸ <span>${item.likes || 0}</span>
      </button>
    `;

    $list.append(el);
  }

  // ëŒ“ê¸€ ì´ˆê¸° ë¶ˆëŸ¬ì˜¤ê¸°
  (async () => {
    const { data, error } = await sb
      .from("comments")
      .select("*")
      .eq("page_id", PAGE_ID)
      .eq("kind", "message")            // ëŒ“ê¸€ë§Œ ì¡°íšŒ
      .order("created_at");

    if (error) {
      console.error(error);
      return;
    }

    (data || []).forEach(renderComment);
  })();

  // ëŒ“ê¸€ ì‹¤ì‹œê°„ ë°˜ì˜ + ì¢‹ì•„ìš” ì‹¤ì‹œê°„ ë°˜ì˜
  sb.channel("realtime-comments")
    .on(
      "postgres_changes",
      { event: "*", schema: "public", table: "comments", filter: `page_id=eq.${PAGE_ID}` },
      (payload) => {
        if (payload.eventType === "INSERT") {
          if (payload.new.kind !== "message") return;

          renderComment(payload.new);
          $list.scrollTo({ top: $list.scrollHeight, behavior: "smooth" });
        }
        if (payload.eventType === "UPDATE") {
          const btn = document.querySelector(
            `button.like-btn[data-id="${payload.new.id}"]`
          );
          if (btn) {
            const span = btn.querySelector("span");
            if (span) span.textContent = payload.new.likes;
          }
        }
      }
    )
    .subscribe();

  // ==== 4) ì¼ë°˜ ì¶•í•˜ ëŒ“ê¸€ ì „ì†¡ ====
  $form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const nickname = ($nick.value || "Guest").slice(0, 24);
    const body = ($body.value || "").trim();
    if (!body) return;

    $nick.value = "";
    $body.value = "";

    const { error } = await sb
      .from("comments")
      .insert({ page_id: PAGE_ID, nickname, body, kind: "message" });

    if (error) {
      console.error(error);
      alert("ëŒ“ê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
    }
  });

  // ==== 5) ì¸ìƒìƒ· íˆ¬í‘œ (í† ê¸€ + ì™•ê´€ ê°±ì‹ ) ====
  document.addEventListener("click", async (e) => {
    const target = e.target.closest(".photo-vote-btn, .vote-thumb");
    if (!target) return;

    const card = target.classList.contains("vote-thumb")
      ? target
      : target.closest(".vote-thumb");
    if (!card) return;

    const photoId = card.dataset.photoId;
    if (!photoId) return;

    const btn = card.querySelector(".photo-vote-btn");
    const span = btn.querySelector("span");
    const key = `photo_voted_${photoId}`;

    const current = parseInt(span.textContent || "0", 10);
    const alreadyVoted = localStorage.getItem(key) === "1";

    let next = current;
    if (alreadyVoted) {
      next = Math.max(current - 1, 0);
      span.textContent = next;
      btn.classList.remove("voted");
      localStorage.removeItem(key);
    } else {
      next = current + 1;
      span.textContent = next;
      btn.classList.add("voted");
      localStorage.setItem(key, "1");
    }

    const { error } = await sb
      .from("photo_votes")
      .update({ votes: next })
      .eq("page_id", PAGE_ID)
      .eq("photo_id", photoId);

    if (error) {
      console.error(error);
      alert("íˆ¬í‘œ ë°˜ì˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
      // ë¡¤ë°±
      span.textContent = current;
      if (alreadyVoted) {
        btn.classList.add("voted");
        localStorage.setItem(key, "1");
      } else {
        btn.classList.remove("voted");
        localStorage.removeItem(key);
      }
      return;
    }

    // ìºì‹œ ì—…ë°ì´íŠ¸ + ì¬ë Œë” â†’ ì™•ê´€ ì›€ì§ì„
    const idx = photoVoteRows.findIndex(r => r.photo_id === photoId);
    if (idx !== -1) {
      photoVoteRows[idx] = { ...photoVoteRows[idx], votes: next };
    } else {
      photoVoteRows.push({ page_id: PAGE_ID, photo_id: photoId, votes: next });
    }
    renderPhotoVotes(photoVoteRows);
  });

  // ==== 6) ëŒ“ê¸€ ì¢‹ì•„ìš” ê¸°ëŠ¥ ====
  document.addEventListener("click", async (e) => {
    const btn = e.target.closest(".like-btn");
    if (!btn) return;

    const id = btn.dataset.id;

    btn.classList.remove("pulse");
    void btn.offsetWidth;
    btn.classList.add("pulse");

    const flying = document.createElement("span");
    flying.className = "flying-heart";
    flying.textContent = "â¤";
    btn.appendChild(flying);
    setTimeout(() => flying.remove(), 800);

    const { data, error } = await sb
      .from("comments")
      .select("likes")
      .eq("id", id)
      .single();

    if (error) {
      console.error(error);
      return;
    }

    await sb
      .from("comments")
      .update({ likes: (data.likes || 0) + 1 })
      .eq("id", id);
  });


  // ==== 7) ì§ˆë¬¸/ë‹µë³€ Q&A ì˜ì—­ ====
  const questions = [
    "ì‹ ë¶€ì™€ í•¨ê»˜í•œ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€?",
    "ë‘˜ì´ ì •ë§ ì˜ ë§ëŠ”ë‹¤ê³  ëŠë‚€ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?",
    "ì‹ ë¶€ì—ê²Œ í•œë§ˆë”” ì¶•í•˜ ë©”ì‹œì§€ë¥¼ ë‚¨ê¸´ë‹¤ë©´?",
    "ë‘˜ì˜ ì²«ì¸ìƒì€ ì–´ë• ë‚˜ìš”?",
    "ì‹ ë¶€ì˜ ê°€ì¥ ê·€ì—¬ìš´ ì ì€ ë¬´ì—‡ì¸ê°€ìš”?",
    "ë‘˜ì´ ì˜¤ë˜ì˜¤ë˜ ì˜ ì‚´ ê²ƒ ê°™ë‹¤ê³  ëŠê¼ˆë˜ ìˆœê°„ì€?",
    "ì‹ ë¶€ì™€ í•¨ê»˜ ê°€ê³  ì‹¶ì€ ì—¬í–‰ì§€ëŠ”?",
    "ë‘˜ì˜ ëŸ¬ë¸ŒìŠ¤í† ë¦¬ ì¤‘ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ì¥ë©´ì€?",
    "ì‹ ë¶€ì—ê²Œ ë‚˜ë§Œ ì•„ëŠ” TMI í•œ ê°€ì§€!",
    "ë‘ ì‚¬ëŒì„ ë³´ë©° ë– ì˜¤ë¥´ëŠ” ë…¸ë˜ëŠ”?"
  ];
  function getRandomQuestionIndex() {
    return Math.floor(Math.random() * questions.length);
  }

  let currentQuestionIndex = null;
  const qBox = document.getElementById("question-box");
  const qBtn = document.getElementById("draw-question");
  const qnaArea = document.getElementById("qna-answer-area");
  const qnaQuestionText = document.getElementById("qna-current-question-text");
  const qnaForm = document.getElementById("qna-form");
  const qnaNick = document.getElementById("qna-nick");
  const qnaBody = document.getElementById("qna-body");
  const qnaAnswerCount = document.getElementById("qna-answer-count");

  let qaCounts = window.qaCounts || {};
  window.qaCounts = qaCounts;

  function animatePetal() {
    const boxRect = qBox.getBoundingClientRect();
    const petal = document.createElement("span");
    petal.textContent = "ğŸŒ¸";
    petal.style.cssText = `
      position: fixed;
      left: ${boxRect.left + boxRect.width / 2}px;
      top: ${boxRect.bottom - 20}px;
      font-size: 26px;
      pointer-events: none;
      z-index: 9999;
      animation: qna-petal-fly 1s ease-out forwards;
    `;
    document.body.appendChild(petal);
    setTimeout(() => petal.remove(), 1000);
  }
  
  // ===== Q&A ì§ˆë¬¸ë³„ ê¸°ì¡´ ë‹µë³€ ê°œìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° =====
  (async () => {
    const { data, error } = await sb
      .from("comments")
      .select("question_index")
      .eq("page_id", PAGE_ID)
      .eq("kind", "qa");

    if (error) {
      console.error("Q&A count load error:", error);
      return;
    }

    // question_indexë³„ ê°œìˆ˜ ì§‘ê³„
    qaCounts = {};
    (data || []).forEach(item => {
      const idx = item.question_index;
      if (idx === null || idx === undefined) return;
      qaCounts[idx] = (qaCounts[idx] || 0) + 1;
    });

    console.log("ğŸ“Œ ì´ˆê¸° Q&A ê°œìˆ˜ ë¡œë“œ:", qaCounts);
  })();

  // ì§ˆë¬¸ ë½‘ê¸° ë²„íŠ¼
  if (qBtn) {
    qBtn.addEventListener("click", () => {
      qBox.style.transform = "scale(0.95)";
      setTimeout(() => (qBox.style.transform = "scale(1)"), 120);

      animatePetal();

      const idx = getRandomQuestionIndex();
      currentQuestionIndex = idx;
      const qText = questions[idx];

      qBox.textContent = qText;

      qnaArea.style.display = "block";
      qnaQuestionText.textContent = `Q. ${qText}`;

      //qnaBody.focus();

      const count = qaCounts[idx] || 0;
      if (count > 0) {
        qnaAnswerCount.textContent = `ì´ ì§ˆë¬¸ì— ë‹¬ë¦° ë‹µë³€ ${count}ê°œê°€ ìˆì–´ìš” âœ¨`;
      } else {
        qnaAnswerCount.textContent = "ì•„ì§ ì´ ì§ˆë¬¸ì— ëŒ€í•œ ì²« ë²ˆì§¸ ë‹µë³€ì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš” ğŸŒ¸";
      }
    });
  }

  // ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ ì €ì¥
  if (qnaForm) {
    qnaForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      if (currentQuestionIndex === null || typeof currentQuestionIndex !== "number") {
        alert("ë¨¼ì € ì§ˆë¬¸ ì¹´ë“œë¥¼ ë½‘ì•„ì£¼ì„¸ìš”!");
        return;
      }

      const nickname = (qnaNick.value || "Guest").slice(0, 24);
      const body = (qnaBody.value || "").trim();
      if (!body) return;

      qnaBody.value = "";

      const { error } = await sb
        .from("comments")
        .insert({
          page_id: PAGE_ID,
          nickname,
          body,
          kind: "qa",
          question_index: currentQuestionIndex
        });

      if (error) {
        console.error(error);
        alert("ë‹µë³€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        return;
      }

      qaCounts[currentQuestionIndex] = (qaCounts[currentQuestionIndex] || 0) + 1;
      qnaAnswerCount.textContent =
        `ì´ ì§ˆë¬¸ì— ë‹¬ë¦° ë‹µë³€ ${qaCounts[currentQuestionIndex]}ê°œê°€ ìˆì–´ìš” âœ¨`;
    });
  }

  // Q&A ê½ƒì ì• ë‹ˆë©”ì´ì…˜ keyframes ì£¼ì…
  const style = document.createElement("style");
  style.textContent = `
    @keyframes qna-petal-fly {
      0%   { opacity:1; transform:translate(-50%, -50%) scale(1); }
      100% { opacity:0; transform:translate(-50%, -120px) scale(1.4); }
    }
  `;
  document.head.appendChild(style);


    // ==== 8) ì²­ì²©ì¥ ëª¨ì„ ë‚ ì§œ ì˜ê²¬ ëª¨ìœ¼ê¸° ====
  const $meetForm = document.getElementById("meetup-form");
  const $meetName = document.getElementById("meet-name");
  const $meetDate = document.getElementById("meet-date");
  const $meetNote = document.getElementById("meet-note");
  const $meetList = document.getElementById("meetup-list");
  const $meetSummary = document.getElementById("meetup-summary");

  // ë‚ ì§œ í¬ë§· helper (YYYY-MM-DD â†’ ë³´ê¸° ì¢‹ê²Œ)
  function formatDateKorean(str) {
    if (!str) return "";
    const d = new Date(str + "T00:00:00");
    const y = d.getFullYear();
    const m = d.getMonth() + 1;
    const day = d.getDate();
    const wNames = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
    const w = wNames[d.getDay()];
    return `${y}ë…„ ${m}ì›” ${day}ì¼ (${w})`;
  }

  // ì˜ê²¬ ëª©ë¡ ë Œë”ë§
  function renderMeetupList(items) {
    if (!$meetList || !$meetSummary) return;

    if (!items || items.length === 0) {
      $meetList.innerHTML = "";
      $meetSummary.textContent = "ì•„ì§ ëª¨ì„ ë‚ ì§œ ì˜ê²¬ì´ ì—†ì–´ìš”. ì²« ë²ˆì§¸ë¡œ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸŒ¸";
      return;
    }

    // ë‚ ì§œë³„ ì§‘ê³„
    const map = {};
    items.forEach(it => {
      const key = it.meet_date;
      if (!map[key]) map[key] = 0;
      map[key] += 1;
    });

    // ìš”ì•½ í…ìŠ¤íŠ¸ ìƒì„± (ë‚ ì§œë³„ ëª‡ ëª…ì¸ì§€)
    const summaryParts = Object.entries(map)
      .sort(([d1], [d2]) => d1.localeCompare(d2))
      .map(([d, count]) => `${formatDateKorean(d)} Â· ${count}ëª…`);

    $meetSummary.innerHTML = `
      <b>ëª¨ì„ ë‚ ì§œ í›„ë³´ ìš”ì•½</b><br>
      ${summaryParts.join("<br>")}
    `;

    // ê°œë³„ ì˜ê²¬ ë¦¬ìŠ¤íŠ¸
    $meetList.innerHTML = items
      .sort((a, b) => (a.meet_date || "").localeCompare(b.meet_date || "") || (new Date(a.created_at) - new Date(b.created_at)))
      .map(it => `
        <div style="padding:8px 6px;border-bottom:1px solid #f3f4f6;font-size:0.9rem;">
          <div style="font-weight:600;">
            ${esc(it.nickname || "Guest")}
            <span style="color:#9ca3af;font-size:0.78rem;margin-left:4px;">
              ${formatDateKorean(it.meet_date)}
            </span>
          </div>
          ${it.note ? `<div style="margin-top:4px;color:#4b5563;">${esc(it.note)}</div>` : ""}
        </div>
      `)
      .join("");
  }

  // ì´ˆê¸° ì˜ê²¬ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
  (async () => {
    if (!$meetList) return;
    const { data, error } = await sb
      .from("meetup_suggestions")
      .select("*")
      .eq("page_id", PAGE_ID)
      .order("meet_date", { ascending: true })
      .order("created_at", { ascending: true });

    if (error) {
      console.error(error);
      return;
    }
    renderMeetupList(data || []);
  })();

  // ì˜ê²¬ ì „ì†¡
  if ($meetForm) {
    $meetForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const nickname = ($meetName.value || "Guest").slice(0, 24);
      const meetDate = ($meetDate.value || "").trim();
      const note = ($meetNote.value || "").trim();

      if (!meetDate) {
        alert("ë¨¼ì € í¬ë§ ë‚ ì§œë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš” ğŸ—“ï¸");
        return;
      }

      // ì…ë ¥ ë¹„ìš°ê¸°
      $meetNote.value = "";

      const { data, error } = await sb
        .from("meetup_suggestions")
        .insert({
          page_id: PAGE_ID,
          nickname,
          meet_date: meetDate,
          note
        })
        .select(); // insert ê²°ê³¼ë„ dataë¡œ ë°›ê¸°

      if (error) {
        console.error(error);
        alert("ì˜ê²¬ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
        return;
      }

      // ëª©ë¡ ë‹¤ì‹œ ê°±ì‹ 
      const inserted = data && data[0];
      if (inserted) {
        // ê·¸ëƒ¥ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ë„ ë˜ê³ ,
        // ì—¬ê¸°ì„œëŠ” ê¸°ì¡´ ëª©ë¡ ì¬ì¡°íšŒ ëŒ€ì‹  ê°„ë‹¨íˆ ì¶”ê°€ í›„ ë‹¤ì‹œ ë Œë”
        const { data: allRows, error: listErr } = await sb
          .from("meetup_suggestions")
          .select("*")
          .eq("page_id", PAGE_ID)
          .order("meet_date", { ascending: true })
          .order("created_at", { ascending: true });

        if (!listErr) {
          renderMeetupList(allRows || []);
        }
      }

      // alert("ì˜ê²¬ì´ ë“±ë¡ë˜ì—ˆì–´ìš”! ê³ ë§ˆì›Œìš” ğŸ’•");
    });
  }
</script>



<!-- ì§ˆë¬¸ë³„ ë‹µë³€ ëª¨ì•„ë³´ê¸° ëª¨ë‹¬ -->
<div class="modal" id="qa-modal">
  <div class="box" style="background:#fff;max-width:640px;width:100%;border-radius:14px;overflow:hidden;">
    <div style="padding:14px 16px;border-bottom:1px solid #f1f1f1;display:flex;justify-content:space-between;align-items:center;">
      <div>
        <div style="font-size:0.9rem;color:#ff6b92;font-weight:600;">ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ ëª¨ì•„ë³´ê¸°</div>
        <div id="qa-modal-question" style="font-size:0.85rem;color:#6b7280;margin-top:2px;"></div>
      </div>
      <button id="qa-modal-close"
              style="border:none;background:none;font-size:1.2rem;cursor:pointer;color:#9ca3af;">
        âœ•
      </button>
    </div>
    <div id="qa-modal-list" style="max-height:360px;overflow-y:auto;padding:12px 16px;font-size:0.9rem;">
      <!-- JSì—ì„œ ë‹µë³€ ëª©ë¡ ë Œë”ë§ -->
    </div>
  </div>
</div>

<script>
  const qaModal = document.getElementById("qa-modal");
  const qaModalQuestion = document.getElementById("qa-modal-question");
  const qaModalList = document.getElementById("qa-modal-list");
  const qaModalClose = document.getElementById("qa-modal-close");
  const qnaViewBtn = document.getElementById("qna-view-answers");

  if (qaModal && qaModalQuestion && qaModalList && qaModalClose && qnaViewBtn) {
    qnaViewBtn.addEventListener("click", async () => {
      if (currentQuestionIndex === null || typeof currentQuestionIndex !== "number") {
        alert("ë¨¼ì € ì§ˆë¬¸ ì¹´ë“œë¥¼ ë½‘ì•„ì£¼ì„¸ìš”!");
        return;
      }

      const qText = questions[currentQuestionIndex] || "";
      qaModalQuestion.textContent = `Q. ${qText}`;
      qaModalList.innerHTML = "ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...";

      try {
        const { data, error } = await sb
          .from("comments")
          .select("*")
          .eq("page_id", PAGE_ID)
          .eq("kind", "qa")
          .eq("question_index", currentQuestionIndex)
          .order("created_at", { ascending: true });

        if (error) {
          console.error(error);
          qaModalList.textContent = "ë‹µë³€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš” ğŸ¥²";
          return;
        }

        if (!data || data.length === 0) {
          qaModalList.textContent = "ì•„ì§ ì´ ì§ˆë¬¸ì— ëŒ€í•œ ë‹µë³€ì´ ì—†ì–´ìš”. ì²« ë²ˆì§¸ë¡œ ë‹µë³€ì„ ë‚¨ê²¨ì£¼ì„¸ìš” ğŸŒ¸";
        } else {
          qaModalList.innerHTML = data.map(item => `
            <div style="margin-bottom:10px;padding-bottom:8px;border-bottom:1px solid #f3f4f6;">
              <div style="font-weight:600;font-size:0.9rem;">
                ${esc(item.nickname)}
                <span style="color:#9ca3af;font-size:0.75rem;margin-left:4px;">
                  ${item.created_at ? new Date(item.created_at).toLocaleString() : ""}
                </span>
              </div>
              <div style="margin-top:4px;">${esc(item.body)}</div>
            </div>
          `).join("");
        }
      } catch (e) {
        console.error(e);
        qaModalList.textContent = "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš” ğŸ¥²";
      }

      qaModal.classList.add("open");
    });

    qaModalClose.addEventListener("click", () => {
      qaModal.classList.remove("open");
    });

    qaModal.addEventListener("click", (e) => {
      if (e.target === qaModal) {
        qaModal.classList.remove("open");
      }
    });
  }
</script>
</body>
</html>
